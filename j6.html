<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title></title>
        <link rel="stylesheet" href="c.css">
        <script src="j.js"></script>
    </head>
    <body>
        <a href="index.html">
            <img src="v.png" alt="Voltar">
        </a>
        <p id="p0"></p>
        <p id="p1"></p>
        <fieldset id="f0" class="f"></fieldset>
        <div id="d0">
            <p id="p2"></p>
            <p id="p3"></p>
            <p id="p4"></p>
        </div>
        <fieldset id="f1" class="f">
            <button id="ca" class="b">Carregar</button>
        </fieldset>

        <script>
            f=[],b=[],u=[]
            let j,q,n,o,ct,t,m
            let qa,qb,bot,ac,bu,nu
            cs=['gainsboro','darkseagreen']
            
            for(let i=0;i<crs.length;i++){
                for(let j=0;j<2;j++){
                    u.push(crs[i])
                }
            }

            // cn(crs.length)

            function ini(){
                f[0]=ig('f0')
                f[1]=ig('f1')

                j=10
                q=[]
                q[0]=8

                nu=[]
                nu[0]=0
                nu[1]=-1
                nu[2]=0
                nu[3]=q[0]+1
                it(p2,'Jogadas \u00A0\u00A0\u00A0 :'+nu[2]+' / '+nu[3])
            }ini()

            function rei(){
                dpn(f[1])
                qa=[]
                qb=[]
                c0(p0,null)
                c1(p0,'black')
                it(p0,'MemÃ³ria')

                n=[]
                o=[]
                for(let i=0;i<u.length;i++)n[i]=i
                for(let i=0;i<q[0];i++){
                    o[i]=n[i]
                    qb[i]=0
                }
                sorte(o)

                ct=0
                t=[]
                t[0]=0
                t[1]=50
                t[2]=150
                m=0
                ac=false
                bu=[]
            }rei()

            for(let i=0;i<u.length;i++){
                if(i<q[0]){
                    b[i]=ie('button')
                    ii(b[i],'b'+i)
                    ii(b[i],'b')
                    c0(b[i],cs[0])
                    cpx(b[i],40)
                    dpi(b[i])
                    cm(b[i],2)
                    ap(f[0],b[i])
                    dpi(b[i])
                }else{
                    b[i]=ie('button')
                    ii(b[i],'b'+i)
                    ii(b[i],'b')
                    c0(b[i],'white')
                    cpx(b[i],40)
                    dpi(b[i])
                    cm(b[i],2)
                    ap(f[0],b[i])
                    dpn(b[i])
                }
                b[i].onclick=()=>{
                    if(nu[1]!=i){
                        bot=i
                        bu[ct]=i
                        vr()
                        nu[1]=i
                    }
                }
            }

            function vr(){
                if(ct<2){
                    if(qb[bot]==0){
                        c0(b[bot],u[o[bot]])
                        qa[ct]=u[o[bot]]

                        if(ct==1){
                            nu[2]++
                            if(qa[0]==qa[1]){
                                ac=true
                                qb[bu[0]]=1
                                qb[bu[1]]=1
                                nu[0]++
                            }else ac=false

                            if(nu[0]==q[0]/2)m=2
                            else if(nu[2]>=nu[3])m=3
                            else m=1

                            it(p2,'Jogadas \u00A0\u00A0\u00A0 :'+nu[2]+' / '+nu[3])
                        }
                        ct++
                    }
                }
            }

            function at(){
                if(m==1){
                    t[0]++
                    if(t[0]>t[1]){
                        ct=0
                        for(let i=0;i<u.length;i++){
                            if(ac){
                                if(i==bu[0] || i==bu[1]){
                                    c0(b[i],cs[1])
                                }else{
                                    if(qb[i]==0)c0(b[i],cs[0])
                                } 
                            }else{
                                if(qb[i]==0)c0(b[i],cs[0])
                            } 
                        }
                        t[0]=0
                        m=0
                        ac=false
                        nu[1]=-1
                    }
                }
                if(m==2){
                    if(t[0]==0){
                        c0(p0,'blue')
                        c1(p0,'white')
                        it(p0,'Passou!')
                    }
                    t[0]++
                    
                    if(t[0]>t[2]){
                        if(q[0]<30){
                            q[0]+=2
                            nu[3]+=3
                        }
                        rei()
                        t[0]=0
                        m=0
                        ac=false
                        nu[0]=0
                        nu[1]=-1
                        nu[2]=0
                        it(p2,'Jogadas \u00A0\u00A0\u00A0 :'+nu[2]+' / '+nu[3])
                        for(let i=0;i<u.length;i++){
                            if(i<q[0]){
                                c0(b[i],cs[0])
                                dpi(b[i])
                            }else{
                                c0(b[i],'white')
                                dpn(b[i])
                            }
                        }
                    }
                }
                if(m==3){
                    if(t[0]==0){
                        c0(p0,'red')
                        c1(p0,'white')
                        it(p0,'Perdeu!')
                    }
                    t[0]++
                    
                    if(t[0]>t[2]){
                        if(q[0]>8){
                            q[0]-=2
                            nu[3]-=3
                        }
                        rei()
                        t[0]=0
                        m=0
                        ac=false
                        nu[0]=0
                        nu[1]=-1
                        nu[2]=0
                        it(p2,'Jogadas \u00A0\u00A0\u00A0 :'+nu[2]+' / '+nu[3])
                        for(let i=0;i<u.length;i++){
                            if(i<q[0]){
                                c0(b[i],cs[0])
                                dpi(b[i])
                            }else{
                                c0(b[i],'white')
                                dpn(b[i])
                            }
                        }
                    }
                }
            }
            function rd(){
                at()
                window.requestAnimationFrame(rd)
            }
            rd()
        </script>
    </body>
</html>